<style>
  table#members{
    border: 2px solid #FFCCFF;
    border-radius: 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    width: 400px;
    font-size: 15px;
  }
div.radio label {
  width: 60px;
  height: 25px;
  font-size: 16px;
  line-height: 21px;
}
div.radio label.left {
  background-image: url("/images/opt_left_s.png");
}

div.radio label.middle {
  background-image: url("/images/opt_middle_s.png");
}

div.radio label.right {
  background-image: url("/images/opt_right_s.png");
}

</style>  

<h3>参加者一覧</h3>

<h4><%= @party.party_name %></h4>

<table id="members">
  <% current_user_id = current_user.id %>
  <% @party.members.each do |member| %>
    <tr>
      <td>
        <%= member.user.display_name %>
      </td>  
      <td>
        <%= image_tag(participates_image(member.member_status),
                      :alt => participates_type(member.member_status),
                      :align => 'center', :border => 0) %>
        <% if member.user.id == current_user_id %>
          <% form_for member do |f| %>
            <div class="radio">
              <%= f.radio_button :member_status, Member::PARTICIPATES_TYPE.index("参加").to_s %><!--
              --><%= f.label "member_status_" + Member::PARTICIPATES_TYPE.index("参加").to_s, "参加", :class=>"left" %><!-->
              --><%= f.radio_button :member_status, Member::PARTICIPATES_TYPE.index("未回答").to_s %>
              <%= f.label "member_status_" + Member::PARTICIPATES_TYPE.index("未回答").to_s, "未回答", :class=>"middle" %>
              <%= f.radio_button :member_status, Member::PARTICIPATES_TYPE.index("不参加").to_s %>
              <%= f.label "member_status_" + Member::PARTICIPATES_TYPE.index("不参加").to_s, "不参加", :class=>"right" %>
            </div>
            <%= f.submit '変更' %>
          <% end %>
        <% end %>
      </td>
    </tr>
  <% end %>
</table>

